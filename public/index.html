<!DOCTYPE html>
<html ng-app="movieReviewApp">
  <head>
    <meta charset="utf-8">
    <title>Movie Reviews</title>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular-ui-router/0.2.15/angular-ui-router.min.js"></script>
    <!-- Router -->
    <script type="text/javascript" src="js/router.js"></script>
    <!-- Factories -->
    <script type="text/javascript" src="js/factories/auth_interceptor.js"></script>
    <script type="text/javascript" src="js/factories/auth_token_factory.js"></script>
    <!-- Controllers -->
    <script type="text/javascript" src="js/controllers/home_controller.js"></script>
    <script type="text/javascript" src="js/controllers/auth_controller.js"></script>
    <script type="text/javascript" src="js/controllers/movie_controller.js"></script>
    <script type="text/javascript" src="js/controllers/review_controller.js"></script>
    <!-- App -->
    <script type="text/javascript" src="js/app.js"></script>
    <!-- Styling -->
    <link rel="stylesheet" href="css/style.css">
  </head>

  <body ng-controller="HomeController as home">
    <nav ng-controller="AuthController as auth">
      <h1>Movie Reviews</h1>
      <ul>
        <li ng-if="home.currentUser" ui-sref="user-show">Account</li>
        <li ng-if="!home.currentUser" ui-sref="signup">Sign-Up!</li>
        <li ng-if="home.currentUser" ng-click="auth.logout()">Logout</li>
      </ul>
      <form ng-if="!home.currentUser" ng-submit="auth.login(userPass)">
        <input type="text" placeholder="Email or Username" ng-model="userPass.email_username">
        <input type="password" placeholder="Password" ng-model="userPass.password">
        <button>Submit</button>
      </form>
    </nav>


    <div ng-controller="MovieController as movie">

      <div>
        <form ng-submit="movie.searchMovie(title)">
          <input ng-model="title" placeholder="Movie title">
          <button type="submit">Search!</button>
        </form>
      </div>

      <br><br>

      <div ng-show="movie.bigResult.Response == 'True'">
        <img ng-src={{movie.bigResult.Poster}}>
        <h3>{{movie.bigResult.Title}}</h3>
        <p>{{movie.bigResult.Genre}}</p>
        <p>{{movie.bigResult.Rated}}</p>
        <p>{{movie.bigResult.imdbRating}}</p>
      </div>

      <div ng-show="movie.bigResult.Response == 'False'">
        <h3>Sorry, no results found</h3>
      </div>

        <br>


      <div ng-show="movie.result2 && movie.result2.Poster != 'N/A'">
        <h3>Did you mean..?</h3>
        <img ng-src={{movie.result2.Poster}}
        ng-click=movie.searchMovie(movie.result2.Title)>
        <img ng-show="movie.result3"
        ng-src={{movie.result3.Poster}}
        ng-click=movie.searchMovie(movie.result3.Title)>
        <img ng-show="movie.result3" ng-src={{movie.result4.Poster}}
        ng-click=movie.searchMovie(movie.result4.Title)>
      </div>

    </div>

    <ui-view>
    </ui-view>

  </body>
</html>
